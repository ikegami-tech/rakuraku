<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>らくらくお部屋予約システム</title>
<link rel="icon" href="favicon.ico">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="loading">読み込み中...</div>

<div id="login-screen">
  <div class="login-box">
    <h2>予約システム v3.2</h2>
    <input type="text" id="loginId" placeholder="ユーザーID">
    <input type="password" id="loginPass" placeholder="パスワード">
    <button type="button" class="btn-primary" onclick="tryLogin()">ログイン</button>
  </div>
</div>

<div id="app-screen">
  <header>
    <div class="header-left-group">
      <div id="header-title">部屋予約</div>
      
      <button type="button" class="btn-header-refresh" onclick="manualRefresh()">
        <span>&#8635;</span> 更新
      </button>
      
      <span id="last-update-time" class="last-update-text"></span>
    </div>

    <div class="user-info">
      <div class="settings-container">
        <span class="settings-icon" onclick="toggleSettingsMenu()">&#9881;</span>
        
        <div id="settings-dropdown" class="settings-dropdown-content">
          
          <div class="settings-user-display">
             👤 <span id="display-user-name"></span> さん
          </div>
          
          <div class="settings-item" onclick="openPasswordModal()">
            <span>&#128274;</span> PW変更 
          </div>

          <div class="settings-item" onclick="openContactModal()">
            <span>&#9993;</span> お問い合わせ 
          </div>
  
          <div class="settings-item logout-item" onclick="logout()">
            <span>&#10162;</span> ログアウト
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="nav-tabs">
    <div class="nav-item active" onclick="switchTab('map-view')">マップ検索</div>
    <div class="nav-item" onclick="switchTab('timeline')">一覧(縦)</div>
    <div class="nav-item" onclick="switchTab('logs')">履歴</div>
  </div>

  <div id="view-map-view" class="view-container active">
    <div class="map-wrapper">
      
      <div class="floor-selector">
          <button class="floor-tab active" onclick="switchFloor(7)" id="tab-7f">7階</button>
          <button class="floor-tab" onclick="switchFloor(6)" id="tab-6f">6階</button>
      </div>

      <div id="dual-map-container">
        <div id="area-7f" class="floor-map-unit active">
            <h4 class="pc-floor-title">7階</h4>
            <div class="map-inner-wrapper">
                <img id="map-img-7" src="data:image/png;base64,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"" alt="7階マップ" class="map-image">
                <div id="overlay-container-7" class="overlay-layer"></div>
            </div>
        </div>

        <div id="area-6f" class="floor-map-unit">
            <h4 class="pc-floor-title">6階</h4>
            <div class="map-inner-wrapper">
                <img id="map-img-6" src="data:image/png;base64,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" alt="6階マップ" class="map-image">
                <div id="overlay-container-6" class="overlay-layer"></div>
            </div>
        </div>
      </div>
      
      <p class="map-hint">部屋をクリックすると下に予約状況が表示されます</p>

      <div id="map-timeline-section" class="map-timeline-hidden">
        <h4 id="map-selected-room-name" class="map-room-title"></h4>
        
        <div class="date-controller">
          <button type="button" onclick="changeDate(-1, 'map-date')">&lt;</button>
          <input type="date" id="map-date" onchange="renderVerticalTimeline('map')">
          <button type="button" onclick="changeDate(1, 'map-date')">&gt;</button>
        </div>

        <div class="calendar-scroll-area">
            <div class="time-axis-col" id="time-axis-map"><div class="time-axis-header"></div></div>
            <div class="rooms-container" id="rooms-container-map"></div>
        </div>
      </div>

    </div>
  </div>
  
  <div id="view-timeline" class="view-container">
    <div class="floor-selector mt-10">
        <button class="floor-tab active" onclick="switchTimelineFloor(7)" id="timeline-tab-7f">7階</button>
        <button class="floor-tab" onclick="switchTimelineFloor(6)" id="timeline-tab-6f">6階</button>
    </div>
    
    <div class="date-controller">
      <button type="button" onclick="changeDate(-1, 'timeline-date')">&lt;</button>
      <input type="date" id="timeline-date" onchange="renderVerticalTimeline('all')">
      <button type="button" onclick="changeDate(1, 'timeline-date')">&gt;</button>
      </div>

    <div class="calendar-scroll-area">
      <div class="time-axis-col" id="time-axis-all"><div class="time-axis-header"></div></div>
      <div class="rooms-container" id="rooms-container-all"></div>
    </div>

    <button class="fab-avail-btn" onclick="openAvailabilityModal()">
      <span>空室</span>
      <span>確認</span>
    </button>
  </div>
  
  <div id="view-logs" class="view-container">
    <div class="log-wrapper">
      <div class="log-header-area">
          <h3>操作履歴 (最大1000件)</h3>
          <div class="log-search-box">
              <input type="text" id="log-search-input" placeholder="履歴を検索..." oninput="searchLogs()">
          </div>
      </div>
      <table class="log-table">
        <thead><tr><th>日時</th><th>操作者</th><th>操作</th><th>詳細</th></tr></thead>
        <tbody id="log-tbody"></tbody>
      </table>
      <div id="log-pagination" class="pagination-container"></div>
    </div>
  </div>
</div>
  
<div id="detailModal" class="modal">
  <div class="modal-content modal-sm">
    
    <div class="detail-header-wrapper">
      <h3 class="modal-header-line">予約詳細</h3>
      <div id="detail-meta-info" class="detail-meta-info"></div>
    </div>
    <table class="detail-table">
      <tr><th>日時</th><td id="detail-time" class="text-bold text-lg"></td></tr>
      <tr><th>部屋</th><td id="detail-room"></td></tr>
      <tr><th>用件</th><td id="detail-title"></td></tr>
      <tr><th>参加者</th><td id="detail-members"></td></tr>
      <tr>
  <th>備考</th>
  <td>
    <div id="detail-note" class="note-scroll-area text-muted"></div>
  </td>
</tr>
    </table>

    <div class="modal-footer">
      <button type="button" onclick="closeDetailModal()" class="btn-secondary btn-equal">閉じる</button>
      <button type="button" id="btn-go-edit" class="btn-primary btn-equal">編集する</button>
    </div>
  </div>
</div>

<div id="bookingModal" class="modal">
  <div class="modal-content">
    
    <div class="modal-top-bar">
        <h3 id="modal-title">新規予約</h3>
        <span onclick="closeModal()" class="close-icon">&times;</span>
    </div>
    <input type="hidden" id="edit-res-id">
    
    <div class="form-group">
        <label>部屋</label>
        <select id="input-room"></select>
    </div>

    <div class="form-row align-end mb-15">
      
      <div class="flex-1-2">
        <label for="input-date">日付</label>
        <input type="date" id="input-date">
      </div>

      <div class="flex-1">
        <label for="input-start">開始</label>
        <div class="time-picker-wrapper">
          <input type="tel" id="input-start" placeholder="09:00" autocomplete="off"
                 onclick="selectTimePart(this)" 
                 onkeyup="handleTimeArrowKeys(event, this)"
                 onblur="formatTimeInput(this)">
          
          <div class="time-picker-arrow">▼</div>

          <select class="time-overlay-select" onchange="document.getElementById('input-start').value=this.value; autoSetEndTime();">
             <option value="" selected hidden></option>
             <option value="07:00">07:00</option><option value="07:15">07:15</option><option value="07:30">07:30</option><option value="07:45">07:45</option>
             <option value="08:00">08:00</option><option value="08:15">08:15</option><option value="08:30">08:30</option><option value="08:45">08:45</option>
             <option value="09:00">09:00</option><option value="09:15">09:15</option><option value="09:30">09:30</option><option value="09:45">09:45</option>
             <option value="10:00">10:00</option><option value="10:15">10:15</option><option value="10:30">10:30</option><option value="10:45">10:45</option>
             <option value="11:00">11:00</option><option value="11:15">11:15</option><option value="11:30">11:30</option><option value="11:45">11:45</option>
             <option value="12:00">12:00</option><option value="12:15">12:15</option><option value="12:30">12:30</option><option value="12:45">12:45</option>
             <option value="13:00">13:00</option><option value="13:15">13:15</option><option value="13:30">13:30</option><option value="13:45">13:45</option>
             <option value="14:00">14:00</option><option value="14:15">14:15</option><option value="14:30">14:30</option><option value="14:45">14:45</option>
             <option value="15:00">15:00</option><option value="15:15">15:15</option><option value="15:30">15:30</option><option value="15:45">15:45</option>
             <option value="16:00">16:00</option><option value="16:15">16:15</option><option value="16:30">16:30</option><option value="16:45">16:45</option>
             <option value="17:00">17:00</option><option value="17:15">17:15</option><option value="17:30">17:30</option><option value="17:45">17:45</option>
             <option value="18:00">18:00</option><option value="18:15">18:15</option><option value="18:30">18:30</option><option value="18:45">18:45</option>
             <option value="19:00">19:00</option><option value="19:15">19:15</option><option value="19:30">19:30</option><option value="19:45">19:45</option>
             <option value="20:00">20:00</option><option value="20:15">20:15</option><option value="20:30">20:30</option><option value="20:45">20:45</option>
             <option value="21:00">21:00</option><option value="21:15">21:15</option><option value="21:30">21:30</option><option value="21:45">21:45</option>
             <option value="22:00">22:00</option>
          </select>
        </div>
      </div>

      <div class="time-range-sep">～</div>

      <div class="flex-1">
        <label for="input-end">終了</label>
        <div class="time-picker-wrapper">
          <input type="tel" id="input-end" placeholder="10:00" autocomplete="off"
                 onclick="selectTimePart(this)" 
                 onkeyup="handleTimeArrowKeys(event, this)"
                 onblur="formatTimeInput(this)">
          
          <div class="time-picker-arrow">▼</div>

          <select class="time-overlay-select" onchange="document.getElementById('input-end').value=this.value">
             <option value="" selected hidden></option>
             <option value="07:00">07:00</option><option value="07:15">07:15</option><option value="07:30">07:30</option><option value="07:45">07:45</option>
             <option value="08:00">08:00</option><option value="08:15">08:15</option><option value="08:30">08:30</option><option value="08:45">08:45</option>
             <option value="09:00">09:00</option><option value="09:15">09:15</option><option value="09:30">09:30</option><option value="09:45">09:45</option>
             <option value="10:00">10:00</option><option value="10:15">10:15</option><option value="10:30">10:30</option><option value="10:45">10:45</option>
             <option value="11:00">11:00</option><option value="11:15">11:15</option><option value="11:30">11:30</option><option value="11:45">11:45</option>
             <option value="12:00">12:00</option><option value="12:15">12:15</option><option value="12:30">12:30</option><option value="12:45">12:45</option>
             <option value="13:00">13:00</option><option value="13:15">13:15</option><option value="13:30">13:30</option><option value="13:45">13:45</option>
             <option value="14:00">14:00</option><option value="14:15">14:15</option><option value="14:30">14:30</option><option value="14:45">14:45</option>
             <option value="15:00">15:00</option><option value="15:15">15:15</option><option value="15:30">15:30</option><option value="15:45">15:45</option>
             <option value="16:00">16:00</option><option value="16:15">16:15</option><option value="16:30">16:30</option><option value="16:45">16:45</option>
             <option value="17:00">17:00</option><option value="17:15">17:15</option><option value="17:30">17:30</option><option value="17:45">17:45</option>
             <option value="18:00">18:00</option><option value="18:15">18:15</option><option value="18:30">18:30</option><option value="18:45">18:45</option>
             <option value="19:00">19:00</option><option value="19:15">19:15</option><option value="19:30">19:30</option><option value="19:45">19:45</option>
             <option value="20:00">20:00</option><option value="20:15">20:15</option><option value="20:30">20:30</option><option value="20:45">20:45</option>
             <option value="21:00">21:00</option><option value="21:15">21:15</option><option value="21:30">21:30</option><option value="21:45">21:45</option>
             <option value="22:00">22:00</option>
          </select>
        </div>
      </div>
    </div>

    <label>用件 (タイトル)</label>
    <input type="text" id="input-title" placeholder="定例会議など">
    
    <label>参加者設定</label>
    <div class="group-container" id="group-buttons-area"></div>
    
    <div class="shuttle-container">
        <div class="shuttle-box">
            <div class="shuttle-header">候補者一覧</div>
            <div class="shuttle-search">
                <input type="text" placeholder="名前検索..." id="shuttle-search-input" oninput="renderShuttleLists(this.value)">
            </div>
            <div class="shuttle-list" id="list-candidates"></div>
        </div>
        <div class="shuttle-box bg-selected">
            <div class="shuttle-header bg-header-selected">参加予定者</div>
            <div class="shuttle-list" id="list-selected"></div>
        </div>
    </div>
    
    <label>備考</label>
    <textarea id="input-note" rows="2" placeholder="備品要望など"></textarea>

    <div class="modal-footer">
      <button type="button" id="btn-back-avail" class="btn-secondary" onclick="backToAvailability()" style="display:none; margin-right:auto;">← 戻る</button>
      <button type="button" id="btn-modal-cancel" onclick="closeModal()" class="btn-secondary">キャンセル</button>
      <button type="button" id="btn-save" class="btn-primary" onclick="saveBooking()">保存</button>
      <button type="button" id="btn-delete" class="btn-danger" onclick="deleteBooking()" style="display:none;">削除</button>
    </div>

  </div>
</div>

<div id="groupCreateModal" class="modal">
  <div class="modal-content modal-md">
    <h3 class="mt-0" id="group-modal-title">グループ作成</h3>
    <input type="hidden" id="edit-group-id">
    
    <label>グループ名</label>
    <input type="text" id="new-group-name" placeholder="例: プロジェクトAチーム">
    
    <label>メンバー選択</label>
    <div class="shuttle-container">
        <div class="shuttle-box">
            <div class="shuttle-header">候補者</div>
            <div class="shuttle-search">
                <input type="text" placeholder="検索..." id="group-shuttle-search" oninput="renderGroupCreateShuttle()">
            </div>
            <div class="shuttle-list" id="group-create-candidates"></div>
        </div>
        <div class="shuttle-box bg-selected">
            <div class="shuttle-header bg-header-selected">選択中</div>
            <div class="shuttle-list" id="group-create-selected"></div>
        </div>
    </div>

    <div class="modal-footer justify-end">
      <button type="button" onclick="closeGroupModal()" class="btn-secondary">キャンセル</button>
      <button type="button" class="btn-primary" onclick="saveNewGroup()">保存</button>
    </div>
  </div>
</div>

 <div id="availabilityModal" class="modal">
  <div class="modal-content modal-md">
    <div class="modal-top-bar">
      <h3>空き状況を確認</h3>
      <span class="close-icon" onclick="closeAvailabilityModal()">&times;</span>
    </div>

    <div style="background:#f9f9f9; padding:15px; border-radius:8px; margin-bottom:15px;">
      <div class="avail-search-row">
        
        <div class="avail-input-group">
          <label>日付</label>
          <input type="date" id="avail-date">
        </div>

        <div class="avail-time-row">
            
            <div class="avail-input-group">
              <label>開始</label>
              <div class="time-picker-wrapper">
                <input type="tel" id="avail-start" placeholder="09:00" autocomplete="off"
                       onclick="selectTimePart(this)" 
                       onkeyup="handleTimeArrowKeys(event, this)"
                       onblur="formatTimeInput(this)">
                <div class="time-picker-arrow">▼</div>
                <select class="time-overlay-select" onchange="document.getElementById('avail-start').value=this.value; autoSetAvailEndTime();">
                    <option value="" selected hidden></option>
                    <option value="07:00">07:00</option><option value="07:15">07:15</option><option value="07:30">07:30</option><option value="07:45">07:45</option>
                    <option value="08:00">08:00</option><option value="08:15">08:15</option><option value="08:30">08:30</option><option value="08:45">08:45</option>
                    <option value="09:00">09:00</option><option value="09:15">09:15</option><option value="09:30">09:30</option><option value="09:45">09:45</option>
                    <option value="10:00">10:00</option><option value="10:15">10:15</option><option value="10:30">10:30</option><option value="10:45">10:45</option>
                    <option value="11:00">11:00</option><option value="11:15">11:15</option><option value="11:30">11:30</option><option value="11:45">11:45</option>
                    <option value="12:00">12:00</option><option value="12:15">12:15</option><option value="12:30">12:30</option><option value="12:45">12:45</option>
                    <option value="13:00">13:00</option><option value="13:15">13:15</option><option value="13:30">13:30</option><option value="13:45">13:45</option>
                    <option value="14:00">14:00</option><option value="14:15">14:15</option><option value="14:30">14:30</option><option value="14:45">14:45</option>
                    <option value="15:00">15:00</option><option value="15:15">15:15</option><option value="15:30">15:30</option><option value="15:45">15:45</option>
                    <option value="16:00">16:00</option><option value="16:15">16:15</option><option value="16:30">16:30</option><option value="16:45">16:45</option>
                    <option value="17:00">17:00</option><option value="17:15">17:15</option><option value="17:30">17:30</option><option value="17:45">17:45</option>
                    <option value="18:00">18:00</option><option value="18:15">18:15</option><option value="18:30">18:30</option><option value="18:45">18:45</option>
                    <option value="19:00">19:00</option><option value="19:15">19:15</option><option value="19:30">19:30</option><option value="19:45">19:45</option>
                    <option value="20:00">20:00</option><option value="20:15">20:15</option><option value="20:30">20:30</option><option value="20:45">20:45</option>
                    <option value="21:00">21:00</option><option value="21:15">21:15</option><option value="21:30">21:30</option><option value="21:45">21:45</option>
                    <option value="22:00">22:00</option>
                </select>
              </div>
            </div>

            <div class="time-range-sep">～</div>

            <div class="avail-input-group">
              <label>終了</label>
              <div class="time-picker-wrapper">
                <input type="tel" id="avail-end" placeholder="10:00" autocomplete="off"
                       onclick="selectTimePart(this)" 
                       onkeyup="handleTimeArrowKeys(event, this)"
                       onblur="formatTimeInput(this)">
                <div class="time-picker-arrow">▼</div>
                <select class="time-overlay-select" onchange="document.getElementById('avail-end').value=this.value">
                    <option value="" selected hidden></option>
                    <option value="07:00">07:00</option><option value="07:15">07:15</option><option value="07:30">07:30</option><option value="07:45">07:45</option>
                    <option value="08:00">08:00</option><option value="08:15">08:15</option><option value="08:30">08:30</option><option value="08:45">08:45</option>
                    <option value="09:00">09:00</option><option value="09:15">09:15</option><option value="09:30">09:30</option><option value="09:45">09:45</option>
                    <option value="10:00">10:00</option><option value="10:15">10:15</option><option value="10:30">10:30</option><option value="10:45">10:45</option>
                    <option value="11:00">11:00</option><option value="11:15">11:15</option><option value="11:30">11:30</option><option value="11:45">11:45</option>
                    <option value="12:00">12:00</option><option value="12:15">12:15</option><option value="12:30">12:30</option><option value="12:45">12:45</option>
                    <option value="13:00">13:00</option><option value="13:15">13:15</option><option value="13:30">13:30</option><option value="13:45">13:45</option>
                    <option value="14:00">14:00</option><option value="14:15">14:15</option><option value="14:30">14:30</option><option value="14:45">14:45</option>
                    <option value="15:00">15:00</option><option value="15:15">15:15</option><option value="15:30">15:30</option><option value="15:45">15:45</option>
                    <option value="16:00">16:00</option><option value="16:15">16:15</option><option value="16:30">16:30</option><option value="16:45">16:45</option>
                    <option value="17:00">17:00</option><option value="17:15">17:15</option><option value="17:30">17:30</option><option value="17:45">17:45</option>
                    <option value="18:00">18:00</option><option value="18:15">18:15</option><option value="18:30">18:30</option><option value="18:45">18:45</option>
                    <option value="19:00">19:00</option><option value="19:15">19:15</option><option value="19:30">19:30</option><option value="19:45">19:45</option>
                    <option value="20:00">20:00</option><option value="20:15">20:15</option><option value="20:30">20:30</option><option value="20:45">20:45</option>
                    <option value="21:00">21:00</option><option value="21:15">21:15</option><option value="21:30">21:30</option><option value="21:45">21:45</option>
                    <option value="22:00">22:00</option>
                </select>
              </div>
            </div>

        </div>
        <button class="btn-primary btn-search-avail" onclick="execAvailabilitySearch()">検索</button>
      
      </div>
    </div>

    <div id="avail-result-container" style="overflow-y:auto; flex:1; border-top:1px solid #eee;">
    </div>
    
    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeAvailabilityModal()">閉じる</button>
    </div>
  </div>
</div>

  <div id="passwordModal" class="modal">
  <div class="modal-content modal-sm">
    <div class="modal-top-bar">
      <h3>パスワード変更</h3>
      <span class="close-icon" onclick="closePasswordModal()">&times;</span>
    </div>

    <label>現在のパスワード</label>
    <input type="password" id="old-pass" placeholder="現在のパスワード">

    <label>新しいパスワード</label>
    <input type="password" id="new-pass" placeholder="新しいパスワード">

    <label>新しいパスワード(確認)</label>
    <input type="password" id="new-pass-confirm" placeholder="もう一度入力">

    <div class="modal-footer">
      <button type="button" class="btn-secondary" onclick="closePasswordModal()">キャンセル</button>
      <button type="button" class="btn-primary" onclick="savePassword()">変更する</button>
    </div>
  </div>
</div>

  <div id="contactModal" class="modal">
  <div class="modal-content modal-sm">
    <div class="modal-top-bar">
      <h3>お問い合わせ</h3>
      <span class="close-icon" onclick="closeContactModal()">&times;</span>
    </div>
    
    <p style="font-size:0.9rem; color:#666; margin-bottom:10px;">
      システムの不具合や改善要望など、お気づきの点をお知らせください。
    </p>

    <label>内容</label>
    <textarea id="contact-message" rows="5" placeholder="例: ○○の機能が使いにくい、××という機能が欲しい、など" style="width:100%; min-height:100px; padding:10px;"></textarea>

    <div class="modal-footer">
      <button type="button" class="btn-secondary" onclick="closeContactModal()">キャンセル</button>
      <button type="button" class="btn-primary" onclick="sendContactFeedback()">送信する</button>
    </div>
  </div>
</div>
  
<script src="script.js"></script>
</body>
</html>
